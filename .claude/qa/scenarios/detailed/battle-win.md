# 시나리오: 전투 승리

**ID**: SC-004
**소요 시간**: 5분
**우선순위**: 높음
**담당 영역**: 전투 시스템, 보상

---

## 목적

전투에서 승리할 때 모든 처리가 정상적으로 이루어지는지 검증합니다.

---

## 사전 조건

1. [x] 전투 진입 완료 (BattleScene)
2. [x] 슬라임과 전투 중

---

## 테스트 단계

### Step 1: 전투 진행

**액션**:
1. "Attack" 반복 선택
2. 몬스터 HP를 0으로 만들기

**예상 결과**:
- 매 턴 데미지 발생
- HP 바 감소
- 약 3-4턴 소요 (슬라임 HP 30)

---

### Step 2: 승리 판정

**액션**:
1. 몬스터 HP 0 도달 시점 관찰

**예상 결과**:
- 즉시 승리 판정
- 몬스터 턴 없음 (HP 0이면 반격 안함)
- "Victory!" 메시지 표시

---

### Step 3: 보상 표시

**액션**:
1. 승리 메시지 후 화면 관찰

**예상 결과**:
- "Gained 10 EXP!" 표시
- "Gained 5 Gold!" 표시
- 메시지 순차 표시 또는 동시 표시

---

### Step 4: 화면 전환 대기

**액션**:
1. 보상 표시 후 대기

**예상 결과**:
- 일정 시간 후 자동으로 GameScene 전환
- 또는 키 입력 대기 후 전환
- 전환 시 깜빡임 없음

---

### Step 5: 게임 화면 복귀

**액션**:
1. GameScene 복귀 후 상태 확인

**예상 결과**:
- 플레이어 위치 복원
- 플레이어 HP 유지 (전투 중 받은 데미지 반영)
- 몬스터 제거됨 (해당 전투의)

---

### Step 6: 플레이어 상태 확인

**액션**:
1. 디버그 정보 확인 (DEBUG=true)
2. 또는 다음 전투 진입하여 HP 확인

**예상 결과**:
- 전투 중 감소한 HP 유지
- MP 상태 유지

---

## 검증 항목

| # | 검증 내용 | Pass/Fail | 비고 |
|---|----------|-----------|------|
| 1 | 몬스터 HP 0 → 승리 판정 | [ ] | |
| 2 | "Victory!" 메시지 | [ ] | |
| 3 | EXP 획득 표시 (10) | [ ] | |
| 4 | Gold 획득 표시 (5) | [ ] | |
| 5 | GameScene 복귀 | [ ] | |
| 6 | 플레이어 HP 유지 | [ ] | |
| 7 | 전투한 몬스터 제거 | [ ] | |

---

## 보상 검증

### 슬라임 보상 (설정값)
| 항목 | 값 |
|------|-----|
| EXP | 10 |
| Gold | 5 |

### 확인
- [ ] EXP 표시 값 = 10
- [ ] Gold 표시 값 = 5

---

## 예외 케이스

- [ ] 막타 크리티컬 시에도 정상 처리
- [ ] 오버킬 (HP가 음수로 가도 정상)
- [ ] 플레이어 HP가 낮을 때 승리해도 복귀

---

## 관련 파일

- `src/scenes/BattleScene.ts`
- `src/systems/BattleSystem.ts`
- `src/ui/BattleUI.ts`

---

## 변경 이력

| 날짜 | 변경 | 담당자 |
|------|------|--------|
| 2026-02-03 | 초기 작성 | @claude |
