# 시나리오: 전투 도망

**ID**: SC-006
**소요 시간**: 5분
**우선순위**: 중간
**담당 영역**: 전투 시스템

---

## 목적

전투 중 도망 기능이 정상 동작하는지 검증합니다.
도망 성공과 실패 두 경우 모두 테스트합니다.

---

## 사전 조건

1. [x] 전투 진입 완료 (BattleScene)
2. [x] 슬라임과 전투 중

---

## 테스트 단계

### Step 1: 도망 버튼 확인

**액션**:
1. 전투 UI에서 "Run" 버튼 위치 확인

**예상 결과**:
- "Run" 버튼이 4개 메뉴 중 하나로 표시
- 버튼 클릭 가능 상태

---

### Step 2: 도망 시도

**액션**:
1. "Run" 버튼 클릭

**예상 결과**:
- "Trying to escape..." 또는 유사 메시지
- 도망 결과 판정

---

### Step 3A: 도망 성공

**액션**:
1. 도망 성공 시 관찰 (50% 확률)

**예상 결과**:
- "Escaped successfully!" 메시지
- GameScene으로 전환
- 전투 종료

---

### Step 3B: 도망 실패

**액션**:
1. 도망 실패 시 관찰 (50% 확률)

**예상 결과**:
- "Failed to escape!" 메시지
- 전투 계속
- 몬스터 턴으로 전환

---

### Step 4: 도망 실패 후 반격

**액션**:
1. 도망 실패 후 몬스터 턴 관찰

**예상 결과**:
- 몬스터가 공격
- 플레이어 데미지 받음
- 플레이어 턴으로 복귀

---

### Step 5: 반복 도망 시도

**액션**:
1. 다시 "Run" 선택 (도망 실패 후)
2. 성공할 때까지 반복 (또는 최대 5회)

**예상 결과**:
- 매번 50% 확률로 판정
- 언젠가는 성공 (확률적)

---

### Step 6: 도망 성공 후 상태

**액션**:
1. 도망 성공 후 GameScene 확인

**예상 결과**:
- 플레이어 위치 복원
- 현재 HP 유지
- 몬스터 그대로 존재 (도망했으므로)

---

## 검증 항목

| # | 검증 내용 | Pass/Fail | 비고 |
|---|----------|-----------|------|
| 1 | Run 버튼 동작 | [ ] | |
| 2 | 도망 시도 메시지 | [ ] | |
| 3 | 도망 성공 시 전투 종료 | [ ] | |
| 4 | 도망 실패 시 전투 계속 | [ ] | |
| 5 | 도망 실패 후 몬스터 반격 | [ ] | |
| 6 | 도망 후 플레이어 상태 유지 | [ ] | |
| 7 | 도망 후 몬스터 존재 | [ ] | |

---

## 도망 확률 검증

### 이론적 확률: 50%

10회 시도 시 예상:
- 성공: 4-6회
- 실패: 4-6회

### 실제 테스트 기록

| 시도 | 결과 |
|------|------|
| 1 | 성공 / 실패 |
| 2 | 성공 / 실패 |
| 3 | 성공 / 실패 |
| 4 | 성공 / 실패 |
| 5 | 성공 / 실패 |

성공률: __/5 (__)

---

## 예외 케이스

- [ ] 첫 턴에 도망 가능
- [ ] HP가 낮을 때도 도망 가능
- [ ] 연속 도망 실패 후에도 정상 동작

---

## 관련 파일

- `src/scenes/BattleScene.ts`
- `src/systems/BattleSystem.ts` (tryEscape 메서드)
- `src/ui/BattleUI.ts`

---

## 변경 이력

| 날짜 | 변경 | 담당자 |
|------|------|--------|
| 2026-02-03 | 초기 작성 | @claude |
