# 시나리오: 첫 전투

**ID**: SC-002
**소요 시간**: 5분
**우선순위**: 높음
**담당 영역**: 전투 시스템

---

## 목적

첫 번째 전투의 전체 플로우가 정상 동작하는지 검증합니다.
게임의 핵심 루프를 확인하는 중요한 시나리오입니다.

---

## 사전 조건

1. [x] 게임 시작 완료 (GameScene)
2. [x] 플레이어 조작 가능 상태

---

## 테스트 단계

### Step 1: 몬스터 위치 확인

**액션**:
1. 맵에서 슬라임(몬스터) 위치 확인
2. 초록색 젤리 형태 스프라이트

**예상 결과**:
- 슬라임 몬스터가 맵에 표시됨
- 위치: 대략 (7, 7) 타일 근처

---

### Step 2: 몬스터에게 접근

**액션**:
1. WASD 또는 화살표키로 슬라임 방향으로 이동
2. 슬라임과 접촉

**예상 결과**:
- 플레이어 이동 애니메이션 재생
- 슬라임 접촉 시 화면 전환

---

### Step 3: 전투 화면 진입

**액션**:
1. 전투 화면 관찰

**예상 결과**:
- BattleScene으로 전환
- 슬라임 스프라이트 표시 (화면 중앙 상단)
- 전투 UI 표시:
  - 플레이어 HP 바 (녹색, 풀)
  - 플레이어 MP 바 (파란색, 풀)
  - 몬스터 HP 바
  - 4개 메뉴 버튼

---

### Step 4: 첫 공격

**액션**:
1. "Attack" 버튼 클릭

**예상 결과**:
- "You attacked Slime!" 메시지
- 데미지 값 표시 (예상: 7-11)
- 몬스터 HP 바 감소

---

### Step 5: 몬스터 반격

**액션**:
1. 몬스터 턴 대기

**예상 결과**:
- "Slime attacked!" 메시지
- 데미지 값 표시 (예상: 1-5)
- 플레이어 HP 바 감소
- HP 바 색상 변화 (체력 낮으면 노랑→빨강)

---

### Step 6: 전투 지속

**액션**:
1. "Attack" 반복 선택
2. 슬라임 HP가 0이 될 때까지

**예상 결과**:
- 턴 교대 정상 동작
- HP 변화 정상 반영
- 슬라임 HP 30 → 약 3-4턴 소요

---

### Step 7: 승리

**액션**:
1. 슬라임 HP 0 달성

**예상 결과**:
- "Victory!" 메시지
- "Gained 10 EXP!" 표시
- "Gained 5 Gold!" 표시
- 잠시 후 GameScene 복귀

---

### Step 8: 게임 화면 복귀

**액션**:
1. 복귀 후 화면 확인

**예상 결과**:
- GameScene 정상 표시
- 플레이어 위치 유지 (또는 안전 위치)
- 슬라임 제거됨 (또는 리스폰)

---

## 검증 항목

| # | 검증 내용 | Pass/Fail | 비고 |
|---|----------|-----------|------|
| 1 | 몬스터 접촉 → 전투 진입 | [ ] | |
| 2 | 전투 UI 정상 표시 | [ ] | |
| 3 | Attack 데미지 계산 (7-11) | [ ] | |
| 4 | 몬스터 반격 데미지 (1-5) | [ ] | |
| 5 | HP 바 업데이트 | [ ] | |
| 6 | 승리 메시지 및 보상 | [ ] | |
| 7 | GameScene 복귀 | [ ] | |

---

## 데미지 계산 검증

### 참고 스탯
- **플레이어**: HP 100, MP 30, ATK 10, DEF 5
- **슬라임**: HP 30, ATK 5, DEF 2

### 예상 데미지
| 방향 | 공식 | 범위 |
|------|------|------|
| 플레이어→슬라임 | 10 - 1 + rand(-2,2) | 7-11 |
| 슬라임→플레이어 | 5 - 2 + rand(-2,2) | 1-5 |

---

## 관련 파일

- `src/scenes/BattleScene.ts`
- `src/systems/BattleSystem.ts`
- `src/ui/BattleUI.ts`
- `src/entities/Monster.ts`

---

## 변경 이력

| 날짜 | 변경 | 담당자 |
|------|------|--------|
| 2026-02-03 | 초기 작성 | @claude |
